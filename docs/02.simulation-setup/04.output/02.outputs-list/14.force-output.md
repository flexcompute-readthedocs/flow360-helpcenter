# Force Output

*Force Output allows you to select specific force and moment coefficient fields from forces and moments calculations and optionally apply moving statistics functions to track these values over time.*

---

## **Available Options**

| *Option* | *Description* | *Applicable* |
|----------|---------------|--------------|
| **Output fields** | Force and moment coefficient fields to include in the output | always |
| **Statistics function** | Optional moving statistics function to apply to the output fields | always |
| **Moving window size** | Size of the moving window for statistics calculation | when **Statistics function** is not `None` |
| **Start step** | Step at which to start calculating statistics | when **Statistics function** is not `None` |
| **Assigned models** | Surface or volume models whose force contributions will be calculated | always |

---

## **Detailed Descriptions**

### **Output fields**

*The force and moment coefficient fields that will be included in the force output.*

- **Required:** Yes (at least one field must be selected)
- **Available fields:**
  - `CL` - Lift coefficient
  - `CD` - Drag coefficient
  - `CFx` - Force coefficient in x-direction
  - `CFy` - Force coefficient in y-direction
  - `CFz` - Force coefficient in z-direction
  - `CMx` - Rolling moment coefficient (moment about x-axis)
  - `CMy` - Pitching moment coefficient (moment about y-axis)
  - `CMz` - Yawing moment coefficient (moment about z-axis)
  - For surface forces, each of the above fields has pressure and skin friction components available:
    - **Pressure components:** `CLPressure`, `CDPressure`, `CFxPressure`, `CFyPressure`, `CFzPressure`, `CMxPressure`, `CMyPressure`, `CMzPressure`
    - **Skin friction components:** `CLSkinFriction`, `CDSkinFriction`, `CFxSkinFriction`, `CFySkinFriction`, `CFzSkinFriction`, `CMxSkinFriction`, `CMySkinFriction`, `CMzSkinFriction`

### **Statistics function**

*Optional moving statistics function to apply to the output fields. When set to `None`, raw force and moment values are output. When a statistics function is selected, the specified statistic is calculated over a moving window.*

- **Default:** `None`
- **Options:**
  - `None` - No statistics processing, output raw values
  - `mean` - Moving average of values in the window
  - `min` - Minimum value in the window
  - `max` - Maximum value in the window
  - `standard_deviation` - Sample standard deviation (normalized by n-1, using Bessel's correction) of values in the window
  - `range` - Difference between the maximum and minimum values in the window

>**Note:** When a statistics function is selected, you must specify the moving window size and start step.

### **Moving window size**

*The size of the moving window in number of data points over which the statistics function is calculated. The window size is defined by the number of data points recorded in the output, not directly by pseudo-steps.*

- **Required:** Yes (when statistics function is not `None`)
- **Default:** 10
- **Minimum value:** 2
- **Behavior:**
  - **For steady simulations:** The solver typically outputs a data point once every 10 pseudo steps. This means a moving window size of 10 would cover 100 pseudo steps.
  - **For unsteady simulations:** The solver outputs a data point for every physical step. A moving window size of 10 would cover 10 physical steps.

### **Start step**

*The number of steps (pseudo or physical) to skip at the beginning of the simulation before the moving statistics calculation starts. This parameter is referenced to the start step of the simulation (pseudo-step 0).*

- **Required:** Yes (when statistics function is not `None`)
- **Default:** 0
- **Behavior:**
  - **For steady simulations:** This value is automatically rounded up to the nearest multiple of 10, as the solver outputs data every 10 pseudo steps.
  - **For unsteady simulations:** The value is used directly as specified (corresponds to physical steps).
- **Reference:** See [Global Time Stepping in Child Cases](02.time-averaging-volume-output.md#global-time-stepping-in-child-cases) for details on how start step is handled in child cases.

### **Assigned models**

*The surface or volume models whose force contributions will be calculated and included in the force output.*

- **Required:** Yes (at least one model must be selected)
- **Available model types:**
  - Wall models (for surface forces)
  - BET Disk models
  - Actuator Disk models
  - Porous Media models
>**Notes:** You can assign multiple models to a single Force Output to aggregate their force contributions.

---

## **Use Cases**

Force Output is useful for:

- Monitoring convergence of force coefficients
- Analyzing force contributions from different components (e.g., wing, tail, rotor)
- Applying statistical analysis to unsteady force data

---

<details>
<summary><h3 style="display:inline-block"> üêç Python Example Usage</h3></summary>

#### Basic Force Output Example

```python
import flow360 as fl

# Create a wall model
wall = fl.Wall(
    name="wing",
    surfaces=[geometry["wing1"], geometry["wing2"]]
)

# Define a basic force output with CL and CD
force_output = fl.ForceOutput(
    name="wing_forces",
    models=[wall],
    output_fields=["CL", "CD"]
)
```

#### Force Output with Moving Statistics

```python
# Define force output with moving statistics
force_output_with_stats = fl.ForceOutput(
    name="wing_forces_statistics",
    models=[wall],
    output_fields=["CL", "CD", "CMz"],
    moving_statistic=fl.MovingStatistic(
        method="mean",
        moving_window_size=10,
        start_step=100
    )
)
```

</details>
