# Render Output

*Render Output in Flow360 automatically generates animations for unsteady simulations by rendering flow field visualizations. This output type creates rendered images that can be combined into animations, making it ideal for visualizing time-dependent flow phenomena such as vortex shedding, unsteady pressure waves, or moving boundaries.*

---

## **Available Options**

| *Option* | *Description* | *Applicable* |
|----------|---------------|--------------|
| **Name** | Name identifier for the render output | always |
| **Frequency** | How often to render frames | always |
| **Frequency offset** | Time step at which to start rendering | always |
| **Surface render** | Configure surface rendering groups | optional |
| **Slice render** | Configure slice rendering groups | optional |
| **IsoSurface render** | Configure isosurface rendering groups | optional |
| **Camera** | Camera/viewpoint settings for the render | optional |

---

## **Important Notes**

> **Important:** 
> - Render Output is **only available for unsteady simulations**. It cannot be used with steady-state cases.

---

## **Global Time Stepping in Child Cases**

When working with **child cases** (cases forked from a parent simulation), it's important to understand that the `Frequency` and `Frequency offset` parameters refer to the **global** time step, which is transferred from the parent case.

**Example:** If the parent case finished at `time_step=174`, the child case will start from `time_step=175`. If `Frequency=100` is set in the child case, the render will be generated at global time steps 200 (25 time steps into the child simulation), 300 (125 time steps into the child simulation), etc. `Frequency offset` also refers to the global time step, meaning that if in the previously mentioned child case, `Frequency offset=50` was set (with `Frequency=100`), the render would be generated at **global** time steps 250 (75 time steps into the child simulation), 350 (175 time steps into the child simulation), etc.

---

## **Detailed Descriptions**

### **Name**

*An identifier for this render output configuration.*

- **Default:** `"Render output"`
- **Example:** `"Vortex Animation"`, `"Pressure Wave Visualization"`
>**Note:** Use descriptive names when configuring multiple render outputs.

### **Frequency**

*Controls how often rendered frames are generated during the simulation.*

- **Default:** `1` (render every time step)
- **Example:** `100` ‚Äî renders a frame every 100 physical time steps.
  - **Standalone case:** If you start a simulation from `time_step=0` with `frequency=100`, renders are generated at time steps 100, 200, 300, etc.
  - **Parent-child case:** If the parent finished at `time_step=174`, the child starts from `time_step=175`. With `frequency=100` in the child, renders are generated at global time steps 200 (25 steps into child), 300 (125 steps into child), 400 (225 steps into child), etc.
>**Notes:** 
> - Lower frequency values provide smoother animations but require more storage and computation.
> - Higher frequency values reduce storage but may result in choppier animations.
> - Important for child cases - this parameter refers to the **global** time step (see [Global Time Stepping](#global-time-stepping-in-child-cases)).

### **Frequency offset**

*Specifies the time step at which to begin rendering frames.*

- **Default:** `0` (start at beginning of simulation)
- **Example:** `1000` ‚Äî with `frequency=100`, renders are generated at time steps 1000, 1100, 1200, etc.
  - **Standalone case:** If you start a simulation from `time_step=0` with `frequency=100` and `frequency_offset=1000`, renders are generated at time steps 1000, 1100, 1200, etc.
  - **Parent-child case:** If the parent finished at `time_step=174`, the child starts from `time_step=175`. With `frequency=100` and `frequency_offset=200` in the child, renders are generated at global time steps 200 (25 steps into child), 300 (125 steps into child), 400 (225 steps into child), etc.
>**Notes:** 
> - Useful when you want to skip initial transient flow development in animations.
> - Important for child cases - this parameter refers to the **global** time step (see [Global Time Stepping](#global-time-stepping-in-child-cases)).

### **Surface render**

*Configure one or more surface rendering groups. Each group can contain multiple boundaries that share the same material and visualization settings.*

Each surface render group includes:

- **Material:** Select the rendering material type:
  - **Output fields:** Display a scalar field on the surface (e.g., `Cp`, `Cf`, `Mach`, `pressure_pa`)
- **Set output fields:** Choose which flow field variable to visualize on the surfaces
- **Colormap:** Select the color scheme for visualizing the field (e.g., rainbow, grayscale, temperature)
- **Range:** Define the minimum and maximum values for the colormap:
  - **Min value:** Lower bound of the color scale
  - **Max value:** Upper bound of the color scale
- **Assigned boundaries:** Select which boundary surfaces to include in this render group
  - Use the search bar to find specific boundaries
  - Multiple boundaries can be assigned to a single group

>**Note:** You can create multiple surface render groups with different materials and field selections to visualize different aspects of your simulation simultaneously.

### **Slice render**

*Configure one or more slice rendering groups. Each group can contain multiple slices that share the same material and visualization settings.*

Each slice render group includes:

- **Material:** Select the rendering material type:
  - **Output fields:** Display a scalar field on the slice (e.g., `Mach`, `pressure`, `T`)
- **Set output fields:** Choose which flow field variable to visualize on the slices
- **Colormap:** Select the color scheme for visualizing the field
- **Range:** Define the minimum and maximum values for the colormap
- **Assigned slices:** Select which slices to include in this render group
  - Select slices from the 3D scene or from a list
  - Multiple slices can be assigned to a single group

>**Note:** Slice renders are useful for visualizing cross-sectional flow patterns and can be combined with surface renders in the same animation.

### **IsoSurface render**

*Configure one or more isosurface rendering groups. Each group can contain multiple isosurfaces that share the same material and visualization settings.*

Each isosurface render group includes:

- **Material:** Select the rendering material type:
  - **Output fields:** Display a scalar field on the isosurface (e.g., `qcriterion`, `Mach`, `T`)
- **Set output fields:** Choose which flow field variable to visualize on the isosurfaces
- **Colormap:** Select the color scheme for visualizing the field
- **Range:** Define the minimum and maximum values for the colormap
- **Isosurfaces:** Define one or more isosurfaces by specifying:
  - **Name:** A unique identifier for the isosurface
  - **Field:** The flow variable used to define the isosurface (e.g., `qcriterion`, `Mach`)
  - **Value:** The constant value of the field variable that defines the isosurface

>**Note:** Isosurface renders are particularly useful for visualizing vortices (using Q-criterion) or shock waves (using Mach number).

### **Camera**

*Configure the camera/viewpoint settings for the render.*

- **Set as current perspective:** Use the current 3D view as the camera position
- Additional camera settings may be available for fine-tuning the viewpoint

>**Note:** The camera settings determine the viewing angle and perspective for all rendered frames in the animation.

---

## **Use Cases**

Render Output is ideal for:

- **Vortex visualization:** Create animations showing vortex development and shedding over time
- **Pressure wave propagation:** Visualize unsteady pressure waves moving through the domain
- **Unsteady flow structures:** Capture time-dependent flow phenomena such as wake development
- **Presentation materials:** Generate high-quality animations for reports, presentations, or publications
- **Flow analysis:** Combine multiple visualization types (surfaces, slices, isosurfaces) in a single animation

---

<details>
<summary><h3 style="display:inline-block"> üí° Tips</h3></summary>

#### Optimizing Render Output

- **Frequency selection:** Choose an appropriate frequency based on your needs:
  - For smooth animations: Use lower frequency values (e.g., 1-10)
  - For storage efficiency: Use higher frequency values (e.g., 50-100)
  - For presentation: Balance between smoothness and file size

- **Field selection:** Select only the fields you need to visualize to reduce computation time

- **Colormap range:** Set appropriate min/max values for your colormap to ensure good contrast and visibility

- **Multiple groups:** Use multiple render groups to visualize different aspects simultaneously (e.g., pressure on surfaces and Q-criterion isosurfaces)

#### Visualization Best Practices

- **For pressure analysis:** Use `Cp` or `pressure_pa` on surfaces with a consistent color scale
- **For vortex identification:** Use Q-criterion isosurfaces with appropriate iso-values
- **For shock visualization:** Use Mach number isosurfaces or pressure fields
- **For boundary layer analysis:** Combine surface renders with slice renders through the boundary layer

</details>

---

<details>
<summary><h3 style="display:inline-block"> ‚ùì Frequently Asked Questions</h3></summary>

- **Can I use Render Output with steady simulations?**  
  > No, Render Output is only available for unsteady simulations. For steady simulations, use standard output types like Surface Output or Volume Output.

- **How do I combine multiple visualization types in one animation?**  
  > Create multiple render groups (Surface, Slice, and/or IsoSurface) within the same Render Output configuration. Each group will be rendered together in the animation.

- **What file format are the rendered images saved in?**  
  > The rendered images are typically saved in a format suitable for animation creation. Check the output directory for the specific format used.

- **Can I change the camera position during the animation?**  
  > The camera position is fixed for all frames in a single Render Output. To create animations with different viewpoints, create multiple Render Output configurations with different camera settings.

- **How do I control the quality/resolution of the rendered images?**  
  > Render quality settings may be available in the camera or render configuration options. Higher quality renders require more computation time.

</details>

---

<details>
<summary><h3 style="display:inline-block"> üêç Python API Example</h3></summary>

#### Basic Render Output

The following example shows how to set up a render output to create an animation of pressure on surfaces and Q-criterion isosurfaces:

```python
# Define a render output with surface and isosurface groups
render_output = fl.RenderOutput(
    name="Vortex Animation",
    frequency=10,                    # Render every 10 time steps
    frequency_offset=0,              # Start from beginning
    groups=[
        # Surface render group for wing surfaces
        fl.RenderOutputGroup(
            surfaces=[volume_mesh["wing*"]],
            material=fl.render.FieldMaterial.rainbow(
                field="Cp",
                min_value=-1.0,
                max_value=1.0,
                alpha=1.0
            )
        ),
        # Isosurface render group for vortices
        fl.RenderOutputGroup(
            isosurfaces=[
                fl.Isosurface(
                    name="Q-criterion",
                    iso_value=0.001,
                    field="qcriterion"
                )
            ],
            material=fl.render.FieldMaterial.rainbow(
                field="Mach",
                min_value=0.0,
                max_value=1.5,
                alpha=0.6
            )
        )
    ],
    camera=fl.render.Camera.orthographic(
        scale=5,
        view=fl.Viewpoint.TOP + fl.Viewpoint.LEFT
    )
)

# Include in simulation parameters
simulation_params = fl.SimulationParams(
    # ... other parameters ...
    time_stepping=fl.UnsteadyTimeStepping(...),  # Must be unsteady
    outputs=[render_output]
)

# Submit through project interface
project.submit_simulation(simulation_params)
```

#### Render Output with Multiple Groups

Creating a render output with surface, slice, and isosurface groups:

```python
render_output = fl.RenderOutput(
    name="Multi-View Animation",
    frequency=20,
    groups=[
        # Surface group for pressure visualization
        fl.RenderOutputGroup(
            surfaces=[volume_mesh["wing*"], volume_mesh["fuselage"]],
            material=fl.render.FieldMaterial.rainbow(
                field="pressure_pa",
                min_value=80000,
                max_value=120000,
                alpha=1.0
            )
        ),
        # Slice group for Mach number
        fl.RenderOutputGroup(
            slices=[
                fl.Slice(
                    name="Center Slice",
                    normal=(0, 1, 0),
                    origin=(0, 0, 0)
                )
            ],
            material=fl.render.FieldMaterial.rainbow(
                field="Mach",
                min_value=0.0,
                max_value=0.8,
                alpha=0.8
            )
        ),
        # Isosurface group for Q-criterion
        fl.RenderOutputGroup(
            isosurfaces=[
                fl.Isosurface(
                    name="Vortices",
                    iso_value=0.0005,
                    field="qcriterion"
                )
            ],
            material=fl.render.PBRMaterial.metal(shine=0.7)
        )
    ],
    camera=fl.render.Camera.orthographic(scale=10)
)

simulation_params = fl.SimulationParams(
    # ... other parameters ...
    outputs=[render_output]
)
```

</details>
