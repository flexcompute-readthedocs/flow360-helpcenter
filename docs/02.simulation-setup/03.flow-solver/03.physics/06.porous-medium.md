# Porous Medium Model

*The Porous Medium model in Flow360 simulates flow through porous regions by adding a resistance term to the momentum equations.*

---

## üìã **Available Parameters**

| *Parameter* | *Description* |
|-------------|---------------|

| **Darcy coefficients** | 3D vector of linear (viscous) pressure drop coefficients |
| **Forchheimer coefficient** | 3D vector of quadratic (inertial) pressure drop coefficients |
| **Volumetric heat source** | Optional heat generation within the porous volume |
| **Assigned zones** | Volumes that define the porous region (must specify axes) |

---

## üîç **Detailed Descriptions**

### **Assigned zones**

*Zones assigned to the Porous Medium model. The entity should be defined by Box or zones from the geometry/volume mesh. The axes of entity must be specified to serve as the principle axes of the porous medium material model.*

- **Required**
- **Notes:** 
  - Each entity must have axes defined that determine the principal directions for the resistance coefficients.

### **Darcy coefficients**

*Darcy coefficient of the porous media model which determines the scaling of the viscous loss term. The 3 values define the coefficient for each of the 3 axes defined by the reference frame of the volume zone.*

- **Required**
- **Example:** `(1e6, 0, 0) 1/m¬≤`
- **Notes:** 
  - Values are specified in the local coordinate system of the porous volume
  - The three components correspond to the three principal axes of the volume
  - When using `Box.from_principal_axes()`, the first two directions are those you provide in the `axes` parameter, and the third is the cross product of these two
  - When using `Box.from_axis_and_angle()`, visualize the 3D graphics to identify the directions correctly

### **Forchheimer coefficient**

*Forchheimer coefficient of the porous media model which determines the scaling of the inertial loss term.*

- **Required**
- **Example:** `(1, 0, 0) 1/m`
- **Notes:** 
  - Values are specified in the local coordinate system of the porous volume, same as Darcy coefficients
  - The three components correspond to the three principal axes of the volume
  - These coefficients affect the quadratic (velocity-squared) pressure drop term
  - Typically dominant at higher flow rates

### **Volumetric heat source**

*The volumetric heat source within the porous region.*

- **Default:** `0 W/m¬≥`
- **Example:** `1.0 W/m¬≥`
- **Notes:** 
  - Can be specified as a constant value or as a function of position/time using a string expression
  - String expressions (time/position-dependent functions) can only be defined through the Python API, not in the GUI

---

<details>
<summary><h3 style="display:inline-block"> üí° Tips</h3></summary>

- Base resistance coefficients on experimental data when possible.
- For anisotropic media, define directional resistances aligned with your principal axes.
- Ensure sufficient mesh resolution near the porous media interfaces.
- For heat exchangers, couple with appropriate thermal settings.
- Consider conducting sensitivity studies if experimental data for coefficients is limited.
- When constructing boxes for porous media, carefully define axes to match your physical system's principal directions.

### Best Practices

- Base resistance coefficients on experimental data when possible
- For anisotropic media, define directional resistances appropriately
- Ensure smooth transition of mesh resolution at porous media interfaces
- For heat exchangers, couple with heat transfer settings
- Conduct sensitivity studies on resistance coefficients when experimental data is limited
- Verify pressure drop predictions against known values for similar devices
- Consider the impact of porosity on flow volume and domain sizing

### Common Use Cases
#### Heat Exchangers and Radiators
- Automotive cooling systems
- HVAC equipment
- Power plant components
- Electronic cooling systems

#### Flow Control Devices
- Screens and filters
- Perforated plates
- Flow straighteners
- Diffusers and flow distributors

#### Natural Systems
- Soil and groundwater flow
- Vegetation modeling
- Urban air flow through building arrays

### Determining Resistance Coefficients

#### From Experimental Data
1. Measure pressure drop vs. flow rate
2. Plot Œîp/L vs. velocity
3. Fit to quadratic equation: Œîp/L = av + bv¬≤
4. Viscous resistance = a/Œº
5. Inertial resistance = b/œÅ

#### From Known Loss Coefficients
1. For screens/perforated plates with known loss coefficient K
2. Inertial resistance = K/(2Œîx)
3. Where Œîx is the medium thickness

#### From Correlations
For common geometries like packed beds:
- Ergun equation: Œîp/L = 150Œº(1-Œµ)¬≤v/(Œµ¬≥d¬≤) + 1.75œÅ(1-Œµ)v¬≤/(Œµ¬≥d)
- Where Œµ is porosity and d is particle diameter

</details>

---

<details>
<summary><h3 style="display:inline-block"> ‚ùì Frequently Asked Questions</h3></summary>

- **How do I determine appropriate Darcy and Forchheimer coefficients?**  
  > Coefficients can be determined from experimental pressure drop vs. flow rate data, known loss coefficients, or correlations like the Ergun equation for packed beds. Plot Œîp/L vs. velocity and fit to a quadratic equation: Œîp/L = av + bv¬≤. Then, Darcy coefficient = a/Œº and Forchheimer coefficient = b/œÅ.

- **What's the difference between Darcy and Forchheimer coefficients?**  
  > Darcy coefficients control the linear (viscous) component of pressure drop, proportional to velocity. Forchheimer coefficients control the quadratic (inertial) component, proportional to velocity squared. At low Reynolds numbers, the Darcy term dominates, while at higher Reynolds numbers, the Forchheimer term becomes more significant.

- **How do I handle highly anisotropic porous media?**  
  > Define your entity axes to align with the principal directions of your porous medium. Then specify different coefficient values for each direction. Ensure your mesh adequately resolves the flow in all directions of interest.

- **How do the coefficient vectors relate to the coordinate system?**  
  > The Darcy and Forchheimer coefficients are defined in the local coordinate system of your porous region. When using `Box.from_principal_axes()`, the first two components correspond to the axes you provide, and the third is their cross product. When using `Box.from_axis_and_angle()`, it can be challenging to know which component corresponds to which direction, so use the 3D graphics visualization to verify.

- **Can I model time-dependent heat generation in porous media?**  
  > Yes, the volumetric heat source parameter can accept a string expression that includes time dependency, allowing you to model transient heat generation (python only).

- **How does the porous medium model affect solution stability?**  
  > High resistance coefficients can sometimes cause convergence difficulties. If you encounter instability, consider a gradual ramp-up of the coefficients during the solution process or ensuring adequate mesh resolution in the porous region.

</details>

---

<details>
<summary><h3 style="display:inline-block"> üîí Limitations</h3></summary>

- Simplifies complex geometry effects
- Cannot capture detailed local flow patterns within the porous region
- Requires accurate resistance coefficients for realistic results
- May oversimplify thermal effects in heat exchangers
- Assumes homogeneous properties throughout the porous volume

</details>

---

<details>
<summary><h3 style="display:inline-block"> üêç Python Example Usage</h3></summary>

Below is a Python code example showing how to configure a porous medium model:

```python
# Example (for reference only, not included in GUI documentation)
porous_medium_model = fl.PorousMedium(
    entities=[porous_zone],
    darcy_coefficient=(1e6, 0, 0) / fl.u.m**2,
    forchheimer_coefficient=(1, 0, 0) / fl.u.m,
    volumetric_heat_source=1.0 * fl.u.W/ fl.u.m**3,
)
```

</details> 