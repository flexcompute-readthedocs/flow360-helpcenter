# Outflow Boundary Condition

*The Outflow boundary condition defines where flow exits the computational domain, allowing you to specify conditions at outlet boundaries for internal flow simulations or when exit flow conditions are needed.*

---

## Available Options

| *Option* | *Description* | *Applicable* |
|------------|----------------------------------|----------|
| **Outflow specification** | Method to specify the outflow | always |
| **Pressure** | Pressure at the outlet boundary | **Outflow specification** is `Pressure` |
| **Mach** | Target Mach number at the outlet | **Outflow specification** is `Mach` |
| **Mass flow rate** | Mass flow through the outlet | **Outflow specification** is `Mass flow rate` |
| **Ramp steps** (Python only) | Optional steps to gradually apply mass flow | **Outflow specification** is `Mass flow rate` |
| **Assigned surfaces** | Geometric boundaries to apply the outflow condition | always |

---

## Detailed Descriptions

### Outflow specification

*Method used to specify the outflow conditions.*

- **Options:**
  - `Pressure`
  - `Mass flow rate`
  - `Mach `
>**Note:** Choose the method that best matches your known boundary conditions or simulation requirements.

### Pressure

*The static pressure at the outlet boundary.*

- **Required when `Pressure` is selected.**
- **Example:** `101325 Pa`
>**Note:** The solver enforces this pressure at the boundary.

### Mach

*The target Mach number at the outlet boundary.*

- **Required when `Mach` is selected.**
- **Example:** `0.8`
>**Note:** The solver adjusts the back pressure to achieve the specified Mach number.

### Mass flow rate

*The mass flow rate through the outlet boundary.*

- **Required when `Mass flow rate` is selected.**
- **Example:** `10 kg/s`
>**Note:** The solver adjusts the pressure at the boundary to achieve the specified mass flow rate.

### Ramp steps [Python only]

*Number of pseudo steps over which to gradually increase the mass flow rate to its specified value within 1 physical step.*

- **Default:** `None` (immediate application)
- **Example:** `100`
>**Note:** Ramping can improve stability for simulations with high mass flow rates.

### Assigned surfaces

*Specifies the geometric boundaries to which the outflow boundary condition is applied.*

- **Accepted types:** Surface
>**Note:** Assign the boundaries by selecting from the list using the + button or select graphically in the viewer region.

---

<details>
<summary><h3 style="display:inline-block"> üí° Tips</h3></summary>

### Choosing Outflow Specification Method

- **Pressure** is best when:
  - You know the pressure at the outlet (e.g., atmospheric conditions)
  - For most general-purpose simulations
  - When modeling flows exhausting to environment
  
- **Mach** is best when:
  - Targeting a specific exit velocity for nozzle design
  - Studying choked flow conditions
  - For propulsion applications with specific exit conditions
  
- **Mass Flow Rate** is best when:
  - You need to ensure mass conservation with inlet
  - Modeling systems with multiple inlets/outlets
  - When matching experimental flow conditions

### Outlet Placement

- Place outlets where flow is fully developed if possible
- Allow sufficient distance downstream of complex geometry (10-15 characteristic lengths)
- Avoid placing outlets near regions with strong gradients or flow separation
- For external aerodynamics, ensure outlet boundaries are far downstream of wake regions

### Convergence Strategies

- Start with a higher static pressure and gradually decrease it
- Use the Ramp Steps option for challenging cases
- For subsonic internal flows, try to match the expected static pressure
- For supersonic flows, ensure the outlet is placed where the flow is fully supersonic

### Common Issues

- Reversed flow at outlets may indicate incorrect pressure settings
- For multiple outlets, ensure total mass flow is conserved
- Oscillating solutions may indicate improper outlet placement or specification

</details>

---

<details>
<summary><h3 style="display:inline-block"> ‚ùì Frequently Asked Questions</h3></summary>

- **How do I choose between Static Pressure, Mach Number, and Mass Flow Rate?**  
  > Choose Static Pressure when you know the environmental conditions the flow exhausts into, Mach Number when you need a specific exit velocity, and Mass Flow Rate when you need precise control over the outflow quantity or want to ensure mass conservation.

- **What happens if reverse flow occurs at an outlet?**  
  > Reverse flow at outlets often indicates that the specified pressure is too high, causing flow to enter rather than exit the domain. Try lowering the static pressure or relocating the outlet to a region with more uniform outflow.

- **How far should an outlet be placed from regions of interest?**  
  > For internal flows, outlets should be at least 10-15 characteristic lengths downstream of regions of interest to ensure fully developed flow and minimize artificial pressure effects. For external flows, outlets should be far downstream to capture wake effects properly.

- **Can I use multiple outlet types in the same simulation?**  
  > Yes, different outlets can use different specifications. For example, you might use Static Pressure for an atmospheric exhaust and Mass Flow Rate for an internal duct outlet.

- **How does the Mass Flow Rate outlet work with multiple outlets?**  
  > When using multiple Mass Flow Rate outlets, ensure that the total outflow mass matches the inflow to the domain. The solver will adjust pressures at each outlet to achieve the specified distribution.

</details>

---

<details>
<summary><h3 style="display:inline-block"> üêç Python Example Usage</h3></summary>

```python
# Example of an outlet with static pressure specification
pressure_outlet = fl.Outflow(
    name="pressure_outlet",
    entities=volume_mesh["fluid/outlet"],
    spec=fl.Pressure(value=101325 * fl.u.Pa)
)

# Example of an outlet with Mach number specification
mach_outlet = fl.Outflow(
    name="mach_outlet",
    entities=volume_mesh["fluid/outlet"],
    spec=fl.Mach(value=0.8)
)

# Example of an outlet with mass flow specification
mass_flow_outlet = fl.Outflow(
    name="mass_flow_outlet",
    entities=volume_mesh["fluid/outlet"],
    spec=fl.MassFlowRate(
        value=5 * fl.u.kg / fl.u.s,
        ramp_steps=100
    )
)
```

</details> 