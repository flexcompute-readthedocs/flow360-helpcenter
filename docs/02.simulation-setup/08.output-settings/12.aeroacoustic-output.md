# Aeroacoustic Output

*Aeroacoustic Output in Flow360 enables the prediction of sound generation and propagation from aerodynamic flows. This feature is valuable for applications where noise prediction is important, such as aircraft design, wind turbine performance, and automotive aerodynamics.*

> **Important**: Aeroacoustic Output is **only available for unsteady simulations** (when unsteady time stepping is selected).

---

### üìã **Available Options**

| **Option** | **Description** | **Unit** |
|------------|-----------------|----------|
| `name` | Name for the aeroacoustic output | |
| `observers` | List of observer positions where acoustic data will be recorded | |
| `write_per_surface_output` | Enable output for each surface separately | |

---

### üîç **Detailed Descriptions**

#### `name`

*A descriptive name for this aeroacoustic output.*

- **Default:** `"Aeroacoustic output"`
- **Example:** `"Engine noise prediction"`

#### `observers`

*Defines positions where acoustic data will be recorded. Each observer requires a position (3D coordinates) and a group name.*

- **Default:** *No default value, must be specified*
- **Example:** See Python example below
- **Notes:** Observers can be placed outside the simulation domain but must not be on or inside solid surfaces.

#### `write_per_surface_output`

*When enabled, aeroacoustic results are written for each surface separately, in addition to the combined results for all surfaces.*

- **Default:** `false`
- **Example:** `true`

---

<details>
<summary><h3 style="display:inline-block"> üí° Tips</h3></summary>

### Aeroacoustic History Files

Aeroacoustic Output generates specialized history files containing acoustic data at each observer location:

#### Time Domain Data
- Acoustic pressure time histories for each observer position
- Individual contributions from each surface (if "Write Per Surface Output" is enabled)
- Combined acoustic signals from all surfaces

#### Frequency Domain Data
- Frequency spectra generated from the time domain signals
- Sound Pressure Level (SPL) data at various frequencies
- Overall Sound Pressure Level (OASPL) values

#### File Format and Organization
- CSV files for easy import into analysis software
- Time domain data is updated continuously during the simulation
- Frequency analysis is performed at the end of the simulation
- Files are organized by observer and surface groups

#### Post-Processing
The acoustic history files can be used for:
- Noise source identification
- Directivity analysis
- Spectral analysis
- A-weighted sound level calculations
- Comparison with experimental measurements
- Certification requirement evaluations

### Important Considerations

1. **Observer Placement**: Observers can be placed outside the simulation domain but must not be on or inside solid surfaces.

2. **Temporal Resolution**: Aeroacoustic analysis requires sufficient temporal resolution to capture the relevant frequency content. Make sure your time step is small enough for the frequency range of interest.

3. **Spatial Resolution**: The mesh should be fine enough to resolve acoustic waves of the frequencies of interest. As a rule of thumb, aim for at least 20 grid points per wavelength of the highest frequency of interest.

4. **Simulation Duration**: The simulation must run long enough to capture the acoustic phenomena of interest, including startup transients.

5. **Permeable Surfaces**: When using the permeable approach, the permeable surfaces should enclose all significant acoustic sources and be placed in regions with good mesh resolution.

</details>

---

<details>
<summary><h3 style="display:inline-block"> ‚ùì Frequently Asked Questions</h3></summary>

- **Can I place observers outside the computational domain?**  
  > Yes, observers can be placed outside the computational domain. In fact, this is often preferred for far-field noise predictions. However, observers should not be placed on or inside solid surfaces.

- **What is the difference between solid and permeable patch types?**  
  > The solid patch type uses solid wall boundaries to compute the aeroacoustic solution, which is simpler but may miss some acoustic sources. The permeable patch type uses surfaces embedded within the flow domain, which can capture additional acoustic sources and is generally more accurate for certain applications.

- **How do I determine the appropriate time step for aeroacoustic analysis?**  
  > The time step should be small enough to resolve the highest frequency of interest. As a rule of thumb, you need at least 20 time steps per period of the highest frequency you want to capture.

- **Why is my aeroacoustic output not appearing in the results?**  
  > Ensure your simulation is set to unsteady time stepping, as aeroacoustic output is only available for unsteady simulations. Also verify that your observers are properly defined and not located inside solid surfaces.

- **How long should I run my simulation to get good aeroacoustic results?**  
  > The simulation should run long enough to capture several periods of the lowest frequency of interest, plus additional time to overcome initial transients. For most applications, this means running for at least several flow-through times.

</details>

---

<details>
<summary><h3 style="display:inline-block"> üêç Python Example Usage</h3></summary>

Below is a Python code example showing how to configure aeroacoustic output:

```python
# Basic aeroacoustic output with solid patch type
aeroacoustic_output = fl.AeroAcousticOutput(
    observers=[
        fl.Observer(position=[1.0, 0.0, 1.75] * fl.u.m, group_name="1"),
        fl.Observer(position=[0.2, 0.3, 1.725] * fl.u.m, group_name="1"),
    ],
)

# Aeroacoustic output with permeable patch type
aeroacoustic_output = fl.AeroAcousticOutput(
    observers=[
        fl.Observer(position=[1.0, 0.0, 1.75] * fl.u.m, group_name="1"),
        fl.Observer(position=[0.2, 0.3, 1.725] * fl.u.m, group_name="1"),
    ],
    patch_type="permeable",
    permeable_surfaces=[volume_mesh["inner/interface*"]]
)

# Aeroacoustic output with write_per_surface_output enabled
aeroacoustic_output = fl.AeroAcousticOutput(
    observers=[
        fl.Observer(position=[1.0, 0.0, 1.75] * fl.u.m, group_name="1"),
        fl.Observer(position=[0.2, 0.3, 1.725] * fl.u.m, group_name="1"),
    ],
    write_per_surface_output=True
)
```

</details> 