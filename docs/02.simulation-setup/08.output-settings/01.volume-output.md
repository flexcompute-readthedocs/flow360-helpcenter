# Volume Output

*Volume Output in Flow360 allows you to visualize flow field variables throughout the entire computational domain. This is essential for understanding 3D flow structures, vortex development, shockwaves, and other volumetric flow features.*

---

### üìã **Available Options**

| **Option** | **Description** | **Unit** |
|------------|-----------------|----------|
| `Name` | A descriptive name for the output | |
| `Output Format` | Format for saving volume data | |
| `Output Fields` | Flow variables to include in the output | |
| `Frequency` | How often to save outputs | time steps |
| `Frequency Offset` | Time step at which to start the output animation | time steps |

---

### üîç **Detailed Descriptions**

#### `Name`

*A descriptive identifier for this volume output.*

- **Default:** `Volume output`
- **Example:** `Main Flow Volume`
- **Notes:** Choose a name that helps identify the purpose of this output.

#### `Output Format`

*The file format used to save the volume output data.*

- **Default:** `paraview`
- **Example:** `both`
- **Notes:** Options include "paraview", "tecplot", or "both".

#### `Output Fields`

*Select the flow variables to include in the volume output.*

- **Default:** None selected
- **Example:** `Mach, pressure, qcriterion`
- **Notes:** See detailed field descriptions below. Only select fields you need to analyze to keep file sizes manageable.

#### `Frequency`

*How often to save outputs, in number of physical time steps.*

- **Default:** `-1` (only at the end of simulation)
- **Example:** `100`
- **Notes:** Higher frequencies provide better temporal resolution but increase storage requirements.

#### `Frequency Offset`

*The time step at which to start the output animation.*

- **Default:** `0` (beginning of simulation)
- **Example:** `1000`
- **Notes:** Useful when you want to skip initial transient flow development.

> **Note**: For time-averaged volume output settings, see the [Time-Averaged Volume Output](02.time-averaging-volume-output.md) documentation.

---

### üìä **Available Output Fields**

#### **Universal Variables** (non-dimensional)

- `Cp` - Coefficient of pressure
- `Cpt` - Coefficient of total pressure
- `gradW` - Gradient of primitive solution
- `kOmega` - k and omega
- `Mach` - Mach number
- `mut` - Turbulent viscosity
- `mutRatio` - Turbulent viscosity and freestream dynamic viscosity ratio
- `nuHat` - Spalart-Almaras variable
- `primitiveVars` - Density, velocities (u,v,w), and pressure
- `qcriterion` - Q criterion for vortex identification
- `residualNavierStokes` - N-S residual
- `residualTransition` - Transition residual
- `residualTurbulence` - Turbulence residual
- `s` - Entropy
- `solutionNavierStokes` - N-S solution
- `solutionTransition` - Transition solution
- `solutionTurbulence` - Turbulence solution
- `T` - Temperature
- `velocity` - Velocity vector
- `velocity_x` - X-component of velocity
- `velocity_y` - Y-component of velocity
- `velocity_z` - Z-component of velocity
- `velocity_magnitude` - Magnitude of velocity vector
- `pressure` - Pressure
- `vorticity` - Vorticity
- `vorticityMagnitude` - Vorticity Magnitude
- `wallDistance` - Wall distance
- `numericalDissipationFactor` - NumericalDissipationFactor sensor
- `residualHeatSolver` - Heat equation residual
- `VelocityRelative` - Velocity with respect to non-inertial frame
- `lowMachPreconditionerSensor` - Low-Mach preconditioner factor

#### **Dimensioned Variables**

- `velocity_m_per_s` - Velocity vector (in m/s)
- `velocity_x_m_per_s` - X-component of velocity (in m/s)
- `velocity_y_m_per_s` - Y-component of velocity (in m/s)
- `velocity_z_m_per_s` - Z-component of velocity (in m/s)
- `velocity_magnitude_m_per_s` - Magnitude of velocity vector (in m/s)
- `pressure_pa` - Pressure (in Pa)

#### **Volume-Specific Variables** (non-dimensional)

- `betMetrics` - BET Metrics
- `betMetricsPerDisk` - BET Metrics per Disk
- `linearResidualNavierStokes` - Linear residual of Navier-Stokes solver
- `linearResidualTurbulence` - Linear residual of turbulence solver
- `linearResidualTransition` - Linear residual of transition solver
- `SpalartAllmaras_hybridModel` - Hybrid RANS-LES output for Spalart-Allmaras solver
- `kOmegaSST_hybridModel` - Hybrid RANS-LES output for kOmegaSST solver
- `localCFL` - Local CFL number

---

<details>
<summary><h3 style="display:inline-block"> üí° Tips </h3></summary>

#### Q-Criterion

The `qcriterion` field is extremely valuable for visualizing vortices in the flow field. To effectively use this field:

- Create isosurfaces of Q-criterion to identify vortical structures
- The default isosurface value is calculated as `RefMach¬≤ / (all walls' bounding box length)¬≤`
- For aircraft simulations: a good starting value is approximately `Mach¬≤ / WingSpan¬≤`
- For rotor flows: try `TipMach¬≤ / RotorDiameter¬≤`
- Smaller values show more vortical structures but may clutter visualization
- Larger values show only the strongest vortices

> **Note**: Q-criterion can also be directly exported as an isosurface with a specific iso value using the [Isosurface Output](10.isosurface-output.md) feature, which provides better control over the visualization.

#### BET Visualization

When using Blade Element Theory (BET) models for propellers or rotors, the `betMetrics` field provides valuable data for analyzing:

- Blade loading distributions
- Induced velocities
- Local angle of attack
- Flow conditions at each blade element

These metrics are essential for understanding propeller and rotor performance characteristics.

### ‚ùì Performance Considerations

Volume outputs can generate very large files, especially for fine meshes. Consider the following to manage file sizes:

1. Limit the frequency of volume outputs
2. Be selective about which fields to include
3. Use time-averaged volume outputs for statistical analysis of unsteady flows
4. Consider using slices or isosurfaces instead for targeted analysis

</details>

---

<details>
<summary><h3 style="display:inline-block"> ‚ùì Frequently Asked Questions</h3></summary>

- **How large are volume output files typically?**  
  > File sizes depend on mesh size, selected output fields, and output format. For a mesh with several million cells:
  > - Each field adds approximately 4-8 bytes per cell
  > - A full domain output with 5 fields might be 1-5GB per time step for 100M mesh
  > - Consider using time-averaged outputs or selective fields to reduce storage requirements

- **What's the difference between ParaView and Tecplot formats?**  
  > - **ParaView format** (.vtu): Open-source visualization tool with excellent performance for large datasets. Provides a wide range of visualization and analysis capabilities.
  > - **Tecplot format** (.szplt): Commercial visualization software with specialized aerodynamic analysis tools. May provide more streamlined workflows for certain aerospace applications.
  > - Choose "both" if you're unsure which tool you'll need or if different team members use different tools.

- **How do I choose the right frequency for volume outputs?**  
  > Consider these factors:
  > - For steady-state simulations: Set to `-1` (final solution only) or use a high number (e.g., every 1000 steps)
  > - For unsteady simulations: Ensure you capture the relevant time scales (e.g., for vortex shedding, ensure at least 20-30 snapshots per shedding cycle)
  > - Storage constraints: Higher frequencies generate more data
  > - A good starting point for unsteady flows is 50-100 time steps between outputs

- **Why are my volume outputs missing data in certain regions?**  
  > Missing data in volume outputs typically occurs for these reasons:
  > - For parallel simulations, check that all partitions are being correctly combined
  > - Ensure the simulation has valid data in those regions (check convergence)
  > - For moving mesh simulations, ensure mesh movement is properly configured

- **How can I visualize specific flow features effectively?**  
  > For different flow features:
  > - **Vortices**: Use Q-criterion (isosurfaces) with values around `Mach¬≤/Length¬≤`
  > - **Shock waves**: Density gradient or Mach number gradients work well
  > - **Boundary layers**: Use slices with velocity profiles near walls
  > - **Wake structures**: Combine Q-criterion with velocity magnitude contours

- **Can I add custom output fields to volume output?**  
  > Currently, Flow360 supports only the predefined output fields listed in this documentation. If you need additional derived quantities:
  > - Export the primitive variables and calculate derived quantities in your visualization tool
  > - Use Python post-processing with the Flow360 API to create custom fields
  > - Contact support if you need a specific field that might benefit other users

</details>

---

<details>
<summary><h3 style="display:inline-block"> üêç Python Example Usage</h3></summary>

```python
# Example of configuring volume output using Flow360 Python API
import flow360 as fl

# Define volume output settings
volume_output = fl.VolumeOutput(
    name="Main Flow Volume",
    output_format="paraview",
    output_fields=["Mach", "pressure", "qcriterion", "velocity"],
    frequency=100,  # Save every 100 time steps
    frequency_offset=1000,  # Start at time step 1000
)

# Add volume output to simulation parameters
simulation_params = fl.SimulationParams(
    # ... other simulation parameters ...
    outputs=[volume_output]
)
```

</details>
