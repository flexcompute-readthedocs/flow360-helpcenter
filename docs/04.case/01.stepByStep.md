---
order: 01
---

# Set-up a case step by step

## Geometry

### Mesh Unit
The Mesh Unit is the length unit used in the mesh file. It can be m (meter), cm (centimeter), mm (millimeter), inch, or feet. Used to calculate $L_{gridUnit}$ which is the length in meters of one grid unit, e.g. $L_{gridUnit}=0.001m$ for grid unit mm.

### Reference area
  
The Reference Area, is used to non-dimensionalize lift coefficient (CL), drag coefficient (CD), force, and moment coefficients. For example:

$$CL = Lift / (1/2 * \rho_{\infty} * U_{ref}^2 * Reference Area)$$
$$CD = Drag / (1/2 * \rho_{\infty} * U_{ref}^2 * Reference Area)$$
$$CFx = X Force / (1/2 * \rho_{\infty} * U_{ref}^2 * Reference Area)$$
$$CFy = Y Force / (1/2 * \rho_{\infty} * U_{ref}^2 * Reference Area)$$
$$CFz = Z Force / (1/2 * \rho_{\infty} * U_{ref}^2 * Reference Area)$$

Here, $\rho_{\infty}$ is the freestream density and $U_{ref}$ is the reference velocity calculated by $U_{ref} = MachRef * C_{\infty}$,
where $C_{\infty}$ is the freestream speed of sound, and by default, the reference Mach number, `MachRef`, is set to be equal to the freestream 
Mach number, `Mach`. However, when `Mach`$=0$, `MachRef` needs to be specified explicitly. 
In this case, it is equivalent to an explicitly set non-zero reference velocity in the next section for freestream parameters. Note that, reference area, `refArea`, as inputed to JSON file is assumed nondimensional.
			  
### Moment Center

The Moment Center is the location about which all aerodynamic moments are calculated.

For example:
1. A positive z-directional force acting at an x-coordinate greater than the x-coordinate of the Moment Center would generate a negative y-moment.
2. A positive x-directional force acting at an z-coordinate greater than the z-coordinate of the Moment Center would generate a positive y-moment.
3. A positive x-directional force acting at an y-coordinate greater than the y-coordinate of the Moment Center would generate a negative z-moment.
4. A positive y-directional force acting at an x-coordinate greater than the x-coordinate of the Moment Center would generate a positive z-moment.
5. A positive y-directional force acting at an z-coordinate greater than the z-coordinate of the Moment Center would generate a negative x-moment.
6. A positive z-directional force acting at an y-coordinate greater than the y-coordinate of the Moment Center would generate a positive x-moment.

### Moment Length

The moment reference lengths are used to non-dimensionalize moment coefficients, according to the definitions below. For example:

$$CMx = Mx / (1/2 * \rho_{\infty} * U_{ref}^2 * (refArea * momentLength_x))$$
$$CMy = My / (1/2 * \rho_{\infty} * U_{ref}^2 * (refArea * momentLength_y))$$
$$CMz = Mz / (1/2 * \rho_{\infty} * U_{ref}^2 * (refArea * momentLength_z))$$ 

Here, $(Mx, My, Mz)$ are the moment components with respect to the Moment Center, $\rho_{\infty}$ is the freestream density.
Notably, $U_{ref}$ is the reference velocity calculated by $U_{ref} = MachRef * C_{\infty}$, where $C_{\infty}$ is the freestream speed of sound.
By default, the reference Mach number, `MachRef`, is set to be equal to the freestream Mach number (`Mach`). 
However, when `Mach==0`, `MachRef` needs to be specified explicitly. 
In this case, it is equivalent to an explicitly set non-zero reference velocity in the next section for freestream parameters.




## Freestream


### Freestream density in kg/m^3

Freestream density in kilograms per cubic meter (kg/m^3)
  
- For the US standard atmosphere, see
  [https://www.wikiwand.com/en/U.S._Standard_Atmosphere](https://www.wikiwand.com/en/U.S._Standard_Atmosphere)
    
- For the International standard atmosphere, see
  [https://www.wikiwand.com/en/International_Standard_Atmosphere#/Description](https://www.wikiwand.com/en/International_Standard_Atmosphere#/Description)
  where standard values at different altitudes are given.
  
- At standard sea level condition, enter *1.225*. Be sure to use the value with a unit of kg/m^3.
  
### Freestream temperature in Kelvin

Freestream temperature in Kelvin (K)
  
- For the US standard atmosphere, see 
  [https://www.wikiwand.com/en/U.S._Standard_Atmosphere](https://www.wikiwand.com/en/U.S._Standard_Atmosphere)
  
- For the International standard atmosphere, see
  [https://www.wikiwand.com/en/International_Standard_Atmosphere#/Description](https://www.wikiwand.com/en/International_Standard_Atmosphere#/Description)
  where standard values at different altitudes are given.
  
- At the standard sea level condition, enter 288.15. Be sure to use the value with a unit of Kelvin (K).
  
### Freestream velocity in m/s

Freestream velocity in meters per second.
  
- The freestream velocity, $U_{\infty}$, is calculated by $U_{\infty} = Mach * C_{\infty}$,
where Mach is the freestream Mach number and $C_{\infty}$ is the freestream speed of sound.
- Be sure to specify a dimensional value with the unit of meter/second (m/s).
  
### Do you want to use the freestream velocity as the reference velocity for calculating aerodynamic coefficients?

A reference velocity, $U_{ref}$, is used to calculate aerodynamic coefficients, see examples in [refArea](/04.case/01.stepByStep.html#reference-area) and [moment length](/04.case/01.stepByStep.html#moment-length).

By default, the freestream velocity, $U_{\infty}$, is set to be the reference velocity.
Otherwise, you may enter a different value with the unit of meters per second (m/s) as your reference velocity in the field that shows up below.

### Reference velocity in m/s

The reference velocity, $U_{ref}$, is used to calculate aerodynamic coefficients.

Note that this will be tranlated into a reference Mach number, `MachRef` in the solver input JSON file, according to the following formulas:
- `Mach` $= U_{\infty} / C_{\infty}$
- `MachRef` $= U_{ref} / C_{\infty}$

Where, $C_{\infty}$ is the freestream speed of sound.
Also, when your freestream velocity is zero, i.e. $U_{\infty}==0$ m/s, you must enter a finite value for your reference velocity.
  

  
### Angle of Attack, alpha, in deg

The angle of attack in degrees.
The velocity components, both at boundaries and inside domain, are initialized, based on the angle of attack, $\alpha$ and the side slip angle, $\beta$, according to the following equations:

$U_X =  (freestreamVelocity / C_{\infty}) * \cos(\beta) * \cos(\alpha)$
$U_Y = -(freestreamVelocity / C_{\infty}) * \sin(\beta)$
$U_Z =  (freestreamVelocity / C_{\infty}) * \cos(\beta) * \sin(\alpha)$

Note that the velocity components on the left hand side are non-dimensional as used in Flow360 solver. $C_{\infty}$ is the freestream speed of sound. Also, for flow simulations with a freestream boundary condition, flow fields will be initialized according to this boundary condition.
  
### Angle of Sideslip, beta, in deg

The side slip angle in degrees, $\beta$. See [alpha](/04.case/01.stepByStep#angle-of-attack-alpha-in-deg).




## Boundaries

### Freestream
- units: *non-dimensional*
- see [freestream](/04.case/02.parameters/bc.html#freestream) for more details 
  
### NoSlipWall 
- units: *non-dimensional*
- see [no slip wall](/04.case/02.parameters/bc.html#noslipwall) for more details 

### SlipWall
  - see [ slip wall](/04.case/02.parameters/bc.html#slipwall) for more details  
  
### IsothermalWall
  - units: 
    - Velocity *non-dimensional*
    - Temperature *Kelvin*
  - see [isothermal wall](/04.case/02.parameters/bc.html#isothermalwall) for more details 

### SubsonicOutflowPressure
  - see [subsonic outflow pressure](/04.case/02.parameters/bc.html#subsonicoutflowpressure) for more details.

### SubsonicOutflowMach
  - see [subsonic outflow Mach](/04.case/02.parameters/bc.html#subsonicoutflowmach) for more details.

### SubsonicInflow
  - see [subsonic inflow](/04.case/02.parameters/bc.html#subsonicinflow) for more details.

### MassOutflow
  - units: *kg/s*
  - see [mass outflow](/04.case/02.parameters/bc.html#massoutflow) for more details.
  
### MassInflow: 
  - units: *kg/s*
  - see [mass inflow](/04.case/02.parameters/bc.html#massinflow) for more details.



## Sliding Interfaces

### The signed RPM for the rotation interface

The RPM (revolutions per minute) should be positive if the rotation follows the right-hand rule with respect to the axis of rotation (thumb pointing towards axis). If the rotation follows the left-hand rule, the RPM must be negative.
  


## Time Stepping

### Is the simulation steady?
  
A steady simulation attempts to converge to a steady-state flow solution. Answer no for an unsteady simulation that solves for unsteady flow physics. For the latter, you will need to enter a physical time step size and the total number of time steps.

### Time step size for unsteady simulation (seconds)
  
A second-order implicit time stepping scheme will be used to converge each time step. Enter here the physical time step size, $\Delta t$. Note that this time step size will be nondimensionalized using the freestream speed of sound and the mesh length unit when generating `timeStepSize` for the solver input JSON file.

`timeStepSize` $= \Delta t * C_{\infty}/L_{gridUnit}$

For steady simulations, the physical time step size is equivalent to *inf*, and only one physical time step is needed.

### How many time steps do you want to simulate?

A second-order implicit time stepping scheme will be used to converge each time step. Enter number of time steps here. Note that nonlinear iterations will be used to converge each time step. You will need to enter the number of nonlinear iterations in the next field.
  
### The maximum number of nonlinear iterations used to converge each physical time step
  
A nonlinear iteration scheme (quasi-Newton) will be used to converge each physical time step. When the maximum number of iterations is reached, the solver will proceed to the next physical time step, even if the final nonlinear residuals are still higher than the tolerance.

### Initial CFL number

Flow360 uses a dual time stepping strategy. 

For unsteady simulations, nonlinear iterations through pseudo-time steps are used to converge flow solutions within each physical time step. The CFL number is used by the solver to determine the pseudo time step size. As a measure of numerical stability, the CFL number may be regarded as that it controls how aggressive each pseudo-time iteration is. An iteration with a smaller CFL number makes less progress towards convergence, but is safer from divergence. An iteration with a larger CFL number makes more progress but could lead to divergence before flow solutions converge. Therefore, we recommend starting from a small (safe) initial CFL number of around 1, and ramping it up towards a larger final value of 100 or higher. 

For steady simulations, the settings for the CFL number are the same as above.

### Final CFL number

see [initial CFL number](/04.case/01.stepByStep.html#initial-cfl-number)

### CFL ramping steps



During each non-linear iteration, the CFL number will ramp up from the initial to the final value during this number of CFL ramping steps. If the [maximum number of nonlinear iterations](/04.case/01.stepByStep.html#the-maximum-number-of-nonlinear-iterations-used-to-converge-each-physical-time-step) is lower than this number of ramping steps, the final CFL value will be never reached. If the [maximum number of nonlinear iterations](/04.case/01.stepByStep.html#the-maximum-number-of-nonlinear-iterations-used-to-converge-each-physical-time-step) is larger than this number of ramping steps, the final CFL value will be reached and used for the rest of the iterations. See the [initial CFL number](/04.case/01.stepByStep.html#initial-cfl-number) for more details.


## Navier Stokes Solver


### Tolerance (absolute) of the Navier-Stokes solver
  
This is the convergence criterion for all the nonlinear residuals of the Navier-Stokes equations. The nonlinear iterations through pseudo-time steps only complete when:
- all the convergence criteria are satisfied, including this,
- or [when the maximum number of nonlinear iterations](/04.case/01.stepByStep.html#the-maximum-number-of-nonlinear-iterations-used-to-converge-each-physical-time-step) are reached.

### Number of linear iterations within each Navier-Stokes nonlinear iteration

Each nonlinear (quasi-Newton) iteration requires solving a system of linear equations, for which we use an iterative method. This parameter specifies how many linear iterations to use when solving the system of linear equations iteratively.
  
### Kappa parameter in the MUSCL scheme for the Navier-Stokes solver

Specify a number between -1 and 0.333.  -1 is more robust and 0.333 is the least dissipative.
  
### Order of accuracy for spatial discretization of the Navier-Stokes solver

This order of accuracy is referred to the spatial discretization schemes for the Navier-Stokes equations convection terms. Specify either 1 for first-order or 2 for second-order. You should use second-order solver for an accurate flow solution. But sometimes first-order solutions are useful as initial conditions for cases that are difficult to converge.
  


## Turbulence Model Solver

### Type of turbulence model

For simulations where Reynolds-averaged Navier-Stokes equations are solved, turbulence models are needed to calculate Reynolds stresses. See [https://www.wikiwand.com/en/Turbulence_modeling#/Common_models](https://www.wikiwand.com/en/Turbulence_modeling#/Common_models) for common options.

We offer two eddy viscosity models based on the Boussinesq approximation, i.e. 
- the one-equation Spalart Allmaras (S-A) model,
- the two-equation k-$\omega$ shear stress transport (SST) model.

Extra partial differential equation(s) of the corresponding turbulence model are solved, together with the time averaged Navier-Stokes equations.  
  
### Turn on the rotation-curvature correction?

The Spalart-Schur rotation-curvature (R/C) correction is implemented in Flow360 for the Spalart Allmaras turbulence model, to account for the effects of flow rotation (e.g., inside vortices) and streamline curvature (e.g., around curved walls). Note that this R/C correction is *NOT* turned on by default.
  
### Turn on DDES?

*This option is only available when [steady](/04.case/01.stepByStep.html#is-the-simulation-steady) is turned off, i.e., simulation is unsteady.*

Delayed-Detached-Eddy-Simulation (DDES) turns off the turbulence model away from walls and relies on the mesh and unsteady time steps to resolve the effect of turbulence away from walls. It is one of the most commonly used form of hybrid RANS-LES, where RANS stands for Reynolds-Averaged-Navier-Stokes and LES stands for Large-Eddy-Simulation.

### Tolerance (absolute) of the turbulence model solver
  
This is the convergence criterion for all the nonlinear residual(s) of the turbulence model equation(s). The nonlinear iterations through pseudo-time steps only complete when:
- all the convergence criteria are satisfied, including this,
- or [when the maximum number of nonlinear iterations](/04.case/01.stepByStep.html#the-maximum-number-of-nonlinear-iterations-used-to-converge-each-physical-time-step) are reached.
  
### Number of linear iterations within each turbulence model nonlinear iteration
  
Each nonlinear (quasi-Newton) iteration requires solving a system of linear equations, for which we use an iterative method. This parameter specifies how many linear iterations to use when solving the system of linear equations iteratively.
  
### Kappa parameter in the MUSCL scheme for the turbulence model solver

Specify a number between -1 and 0.333. -1 is more robust and 0.333 is the least dissipative.
  
### Order of accuracy for spatial discretization of the turbulence model equation(s)

This order of accuracy is referred to the spatial discretization schemes for the turbulence model equation(s), particularly the convection terms. Specify either 1 for first-order or 2 for second-order. You should use second-order solver for an accurate flow solution. But sometimes first-order solutions are useful as initial conditions for cases that are difficult to converge.


## Volume Output


### Output format

- `tecplot`: exports `*.szplt` files
- `paraview`: exports `*.vtu` files


### Primitive Variables
	
These primitive flow variables (rho, u, v, w, p) will be output from Flow360 solver. Note that values are non-dimensional.
	
### Vorticity

Outputs non-dimensional vorticity. Non-dimensionalised by $C_{\inf}/L_{gridUnit}$

### Cp

Coefficient of pressure defined by $Cp = (p - p_{\inf})/(0.5 * \rho_{\inf} * U_{ref}^2)$.
  
### Mach

Outputs Mach number.

### Q criterion

This is one of several mathematical criteria that are used to identify vortices and vortical flow structures associated with them. The quantity of Q is the second invariant of velocity gradient tensor.

The Q criterion was originally proposed by Hunt et al. (1988). It identifies the vortices as flow regions with positive Q values. An additional condition is that the pressure in the eddy region should be lower than the ambient pressure. Chakraborty et al. (2005) explained that in an incompressible flow, Q is a local measure of the excess rotation rate relative to the strain rate. In practical terms, a vortex is detected in the case of Q>0. 

As a rule of thumb, to visualize vortical structures in a flow field for an aeronautical application, plot iso-surfaces of a finite small positive threshold on Q values. For example, a threshold roughly equals to $(Ma/L)^2$, where $Ma$ is freestream Mach number, and $L$ is non-dimensional reference length.

*Reference: [https://doi.org/10.1016/j.softx.2020.100604](https://doi.org/10.1016/j.softx.2020.100604) for more details.*


## Surface Output

### Cp
  
Coefficient of pressure defined by $Cp = (p - p_{\inf})/(0.5 * \rho_{\inf} * U_{ref}^2)$.


### Cf

  Skin friction coefficient magnitude
  
  
### Cf Vector

  Skin friction coefficient vector
  