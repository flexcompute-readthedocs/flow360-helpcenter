# Boundary Conditions

Boundary conditions are essential components of your Flow360 simulation that define how flow behaves at the edges of your computational domain. Each boundary in your mesh must be assigned a specific boundary condition type that appropriately represents the physical conditions.

## Overview

In the Models section of the UI, you can configure boundary conditions for each named boundary in your mesh. The boundary condition you select depends on what that boundary represents in your simulation (e.g., a solid surface, the far-field, an inlet, etc.).

## Boundary Condition Types

### Wall

The Wall boundary condition represents a solid surface where the fluid cannot penetrate.

**When to Use**:
- For solid surfaces like aircraft bodies, wings, nacelles, or internal duct walls
- Any boundary where the no-slip condition applies

**Key Settings**:
- **Wall Motion**: 
  - **Stationary** (default): Wall has zero velocity
  - **Moving Wall**: Specify wall velocity for moving surfaces (e.g., rotating wheels, moving belts)
    - **Velocity Components**: Define the x, y, z components of wall velocity
    - **Rotation**: Specify rotation center, axis, and rate for rotating walls
    - **Slater Porous Bleed**: A special wall model that prescribes normal velocity based on surface pressure and density
      - **Static Pressure**: Target static pressure at the bleed boundary
      - **Porosity**: Porosity value (0-1) that controls the amount of flow through the boundary
      - **Activation Step**: Optional pseudo step at which to start applying the model
- **Thermal Condition**:
  - **Adiabatic**: No heat transfer through the wall (default)
  - **Isothermal**: Fixed wall temperature
  - **Heat Flux**: Specified heat flux through the wall
- **Wall Function**: 
  - When enabled, wall functions estimate the velocity field close to solid boundaries
  - Allows for coarser meshes with larger y+ values near walls (optimal y+ range: 30-300)
  - Reduces computational cost while maintaining reasonable accuracy for many applications
  - Best for high Reynolds number flows where resolving the entire boundary layer would be prohibitively expensive
- **Roughness Height**: Equivalent sand grain roughness height for the wall surface. Available only for Fluid zone boundaries.

**Best Practices**:
- Use appropriate y+ values based on your turbulence model
- For moving walls, ensure the motion is consistent with your physical model
- Common moving wall applications:
  - Ground simulations with moving belt in wind tunnels
  - Rotating wheels in automotive simulations
  - Moving components in machinery
- For high-speed flows, consider thermal boundary conditions carefully

### Freestream

The Freestream boundary condition represents the far-field conditions in external aerodynamics.

**When to Use**:
- For external flow boundaries far from the object of interest
- Typically used for the outer boundary of external aerodynamics simulations

**Key Settings**:
- Uses the global freestream conditions defined in Operating Conditions
- Alternatively, you can override the global settings by providing explicit values for the freestream velocity vector:
  - Specify constant values for the X, Y, Z velocity components
  - When specified, this overrides the velocity derived from velocity or Mach number, alpha, and beta angles specified in Operating Condition
- **Turbulence Settings**: Optional [turbulence quantities](#turbulence-quantities) can be specified for this boundary

**Best Practices**:
- Ensure the freestream boundary is sufficiently far from the object (typically 50-100 characteristic lengths)
- For low-speed flows, consider using pressure inlet/outlet conditions instead

### Inflow

The Inflow boundary condition specifies flow entering the computational domain.

**When to Use**:
- Inlet boundaries of internal flow simulations (ducts, pipes, turbomachinery)
- When inlet conditions differ from the global freestream

**Key Settings**:
- **Total Temperature**: Stagnation temperature at the inlet (required)
- **Inflow Specification** (one of the following):
  - **Total Pressure**: Stagnation pressure and optional velocity direction
  - **Mass Flow Rate**: Mass flow rate with optional ramp-up steps
- **Turbulence Settings**: Optional [turbulence quantities](#turbulence-quantities) can be specified for this boundary

**Best Practices**:
- Place inflow boundaries where flow conditions are known and relatively uniform
- For complex inflow profiles, consider using a larger domain with simpler boundary conditions

### Outflow

The Outflow boundary condition defines where flow exits the computational domain.

**When to Use**:
- Outlet boundaries of internal flow simulations
- When the exit flow conditions are not known precisely

**Key Settings**:
- **Outflow Specification** (one of the following):
  - **Static Pressure**: Pressure at the outlet boundary
  - **Mach Number**: Target Mach number at the outlet
  - **Mass Flow Rate**: Specified mass flow rate with optional ramp-up steps

**Best Practices**:
- Place outflow boundaries where flow is fully developed if possible
- Avoid placing outflow boundaries near complex flow features or strong gradients

### Periodic

The Periodic boundary condition links two separate boundaries so that flow exiting one boundary enters the other.

**When to Use**:
- To simulate infinitely repeating geometry (e.g., cascade of turbomachinery blades)
- To reduce computational domain size for symmetric or repeating problems

**Key Settings**:
- **Surface Pairs**: Matching pairs of boundaries that will be treated as periodic
- **Periodicity Type**:
  - **Translational**: Flow passing through one boundary enters the matching boundary with the same orientation
  - **Rotational**: Flow passing through one boundary enters the matching boundary with rotation, with optional axis specification

**Best Practices**:
- Ensure the mesh is compatible between the periodic boundaries
- Verify that the flow physics supports the periodicity assumption

### Symmetry

The Symmetry boundary condition enforces flow symmetry across a plane.

**When to Use**:
- When your geometry and flow conditions are symmetric
- To reduce computational cost by simulating only half (or a portion) of the domain

**Key Settings**:
- No additional configuration required

**Best Practices**:
- Only use when both geometry and expected flow are truly symmetric
- Be cautious with symmetric assumptions for flows that might develop asymmetric features

### Slip Wall

The Slip Wall boundary condition allows flow to slip tangentially along a surface but not penetrate it. Unlike a moving wall, a slip wall has no defined velocity but allows tangential flow with zero shear stress.

**When to Use**:
- When wall friction effects are negligible
- For inviscid flow approximations
- For boundaries where boundary layer resolution is not important

**Key Settings**:
- No additional configuration required

**Best Practices**:
- Use for surfaces where boundary layer effects are not important
- Often used for symmetry planes or far-field boundaries in some cases
- Do not confuse with moving walls, which still enforce the no-slip condition but with a non-zero wall velocity

## Applying Boundary Conditions

To apply boundary conditions in the Flow360 UI:

1. Navigate to the Models section
2. Select the Boundary Conditions tab
3. For each named boundary in your mesh:
   - Select the appropriate boundary condition type
   - Configure any specific settings for that boundary condition
4. Verify all boundaries have been assigned (Flow360 will warn you if any are missing)

## Combining Boundary Conditions

When setting up complex simulations, you'll often use multiple boundary condition types:

- **External Aerodynamics**: Typically uses Wall for the vehicle surfaces and Freestream for the far-field boundary
- **Internal Flows**: Often combines Inflow, Outflow, and Wall boundary conditions
- **Turbomachinery**: May use Periodic conditions with Wall conditions for blades and endwalls

## Troubleshooting

Common issues with boundary conditions include:

- **Reversed Flow at Outlets**: May indicate improper pressure settings or domain sizing
- **Convergence Issues**: Can result from incompatible or poorly placed boundary conditions
- **Unphysical Results**: Often stem from boundary conditions that don't match the physical problem

If you encounter issues, consider:
- Revising your domain layout
- Adjusting boundary condition parameters
- Moving boundaries further from regions of interest

## Turbulence Quantities

Turbulence quantities can be specified for certain boundary conditions (Freestream and Inflow) to better control the turbulence characteristics of the flow entering the domain. These settings are particularly important for accurately capturing boundary layer development and transition.

> **Important**: You can specify at most two turbulence parameters at once. If more are provided, the specification will be invalid.

### Available Methods

You can specify turbulence quantities using one of the following methods, depending on your turbulence model:

#### For Both Spalart-Allmaras and k-ω SST Models:

- **Viscosity Ratio**: 
  - The ratio between turbulent viscosity and laminar viscosity
  - Suitable for both Spalart-Allmaras and k-ω SST turbulence models
  - For Spalart-Allmaras, this value is converted to Modified Viscosity Ratio
  - Typical values: 0.1-10 for external aerodynamics, 10-100 for internal flows

#### For Spalart-Allmaras Model Only:

- **Modified Viscosity Ratio**: 
  - The ratio between modified turbulent viscosity (nuHat) and freestream laminar viscosity
  - Applicable only to Spalart-Allmaras model
  - Default value is 3.0 without transition model, 0.1 with transition model
  - Typical range: 1-10 for most applications

- **Modified Viscosity**: 
  - The absolute value of the modified turbulent viscosity (nuHat)
  - Applicable only to Spalart-Allmaras model
  - Units: Dimensional value with units of viscosity

#### For k-ω SST Model Only:

- **Turbulent Intensity and Length Scale**:
  - **Turbulent Intensity**: Relative turbulence level (as a decimal, not percentage)
  - **Turbulent Length Scale**: Characteristic size of turbulent eddies
  - Formula: k = 1.5(U_ref × I)² where k is turbulent kinetic energy, U_ref is reference velocity, I is intensity
  - Typical intensity values: 0.001-0.01 (0.1-1%) for external flows, 0.01-0.1 (1-10%) for internal flows
  - Typical length scale: proportional to characteristic length of the domain

- **Turbulent Kinetic Energy and Specific Dissipation Rate**:
  - **Turbulent Kinetic Energy (k)**: Energy per unit mass in turbulent fluctuations
  - **Specific Dissipation Rate (ω)**: Rate at which turbulence energy converts to thermal energy
  - Most precise method when specific k and ω values are known
  - Both require dimensional values in consistent units

### Valid Parameter Combinations

The following combinations are valid:

- Single parameter:
  - `viscosity_ratio` (both SA and SST)
  - `modified_viscosity_ratio` (SA only)
  - `modified_viscosity` (SA only)
  - `turbulent_kinetic_energy` (SST only)
  - `turbulent_intensity` (SST only)
  - `turbulent_length_scale` (SST only)

- Two parameter combinations for SST model:
  - `turbulent_kinetic_energy` + `specific_dissipation_rate`
  - `turbulent_kinetic_energy` + `viscosity_ratio`
  - `turbulent_kinetic_energy` + `turbulent_length_scale`
  - `turbulent_intensity` + `specific_dissipation_rate`
  - `turbulent_intensity` + `viscosity_ratio`
  - `turbulent_intensity` + `turbulent_length_scale`
  - `specific_dissipation_rate` + `viscosity_ratio`
  - `specific_dissipation_rate` + `turbulent_length_scale`
  - `viscosity_ratio` + `turbulent_length_scale`

### Default Values

If no turbulence quantities are specified:

- For Spalart-Allmaras model without transition: Equivalent to Modified Viscosity Ratio = 3.0
- For Spalart-Allmaras model with transition: Equivalent to Modified Viscosity Ratio = 0.1
- For k-ω SST model: Equivalent to Viscosity Ratio = 0.01 with Specific Dissipation Rate calculated based on domain size

### When to Specify

- When accurate turbulence properties at boundaries are critical to your simulation
- When simulating flows with known turbulence characteristics (e.g., wind tunnel experiments)
- When default turbulence initialization is insufficient for your application
- When modeling transitional flows or flows with specific turbulence levels

### Best Practices

- Use values based on experimental data when available
- For external aerodynamics (Freestream), lower turbulence levels are typically appropriate
- For internal flows (Inflow), higher turbulence levels may be needed depending on upstream conditions
- Consider the turbulence decay from the inlet to your region of interest
- For wind tunnel simulations, use documented turbulence characteristics of the facility
- When uncertain, the default values work well for many standard applications 